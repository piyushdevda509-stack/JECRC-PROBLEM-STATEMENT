{% extends "base.html" %}

{% block content %}
<div class="auth-card">
  <h2>üîí Reset Password</h2>
  <p class="sub">Enter your new password below.</p>

  <form method="POST" action="{{ url_for('reset_password') }}" class="form">
    <label for="new_password">New Password</label>
    <div class="password-container">
      <input type="password" id="new_password" name="new_password" placeholder="Enter new password" required>
      <span class="toggle-password" onclick="togglePasswordVisibility('new_password')">üëÅÔ∏è</span>
    </div>

    <label for="confirm_password">Confirm Password</label>
    <div class="password-container">
      <input type="password" id="confirm_password" name="confirm_password" placeholder="Re-enter new password" required>
      <span class="toggle-password" onclick="togglePasswordVisibility('confirm_password')">üëÅÔ∏è</span>
    </div>

    <button type="submit" class="btn-3d">Reset Password</button>
  </form>

  <div class="links">
    <a href="{{ url_for('login') }}">‚¨Ö Back to Login</a>
  </div>
</div>

<style>
/* All existing styles from your code */
.auth-card{
    max-width:460px; margin:40px auto; padding:24px;
    background:rgba(40,50,70,0.85); border-radius:12px;
    box-shadow:0 10px 24px rgba(0,0,0,0.35);
}
.auth-card h2{ margin:0 0 8px; color:#fff; text-align:center; }
.sub{ color:#cfd8dc; font-size:14px; text-align:center; margin:0 0 18px; }
.form{ display:flex; flex-direction:column; gap:10px; }
label{ color:#e0e0e0; font-weight:600; font-size:14px; }
input{
    width:100%; padding:10px 12px; border-radius:8px;
    border:1px solid #424b5a; background:#2b2f3c; color:#fff;
}
input:focus{ outline:none; border-color:#6f42c1; box-shadow:0 0 0 2px rgba(111,66,193,.25); }
.btn-3d{
    margin-top:8px; padding:10px 14px; border:none; border-radius:8px;
    background:linear-gradient(90deg,#007bff,#6f42c1); color:#fff; font-weight:600; cursor:pointer;
    box-shadow:0 6px 14px rgba(0,0,0,0.35); transition:transform .15s ease;
}
.btn-3d:hover{ transform:translateY(-2px); }
.links{ margin-top:12px; text-align:center; }
.links a{ color:#90caf9; text-decoration:none; }
.links a:hover{ text-decoration:underline; }

/* New styles for the password show/hide functionality */
.password-container {
    position: relative;
    display: flex;
    align-items: center;
}
.password-container input {
    width: 100%;
    padding-right: 40px; /* Make space for the icon */
}
.toggle-password {
    position: absolute;
    right: 10px;
    cursor: pointer;
    color: #cfd8dc;
    font-size: 18px;
    top: 50%;
    transform: translateY(-50%);
    user-select: none; /* Prevent text selection */
}
</style>

<script>
function togglePasswordVisibility(fieldId) {
    const passwordInput = document.getElementById(fieldId);
    const toggleIcon = passwordInput.nextElementSibling;
    if (passwordInput.type === 'password') {
        passwordInput.type = 'text';
        toggleIcon.textContent = 'üôà'; // Change icon to a "hide" emoji
    } else {
        passwordInput.type = 'password';
        toggleIcon.textContent = 'üëÅÔ∏è'; // Change icon back to a "show" emoji
    }
}
</script>
{% endblock %}